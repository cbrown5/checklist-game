<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Morning Checklist â˜€ï¸</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(160deg, #fff9ef 0%, #eff8ff 100%);
      min-height: 100vh;
      padding: 28px 16px 72px;
    }

    /* â”€â”€ Page header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-header { text-align: center; margin-bottom: 20px; }

    .page-title {
      font-size: 2.5rem;
      font-weight: 900;
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffd000 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
      margin-bottom: 6px;
    }

    .page-date {
      color: #999;
      font-size: 0.9rem;
      letter-spacing: 0.4px;
    }

    /* â”€â”€ Progress chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .progress-row {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .progress-chip {
      background: white;
      border-radius: 24px;
      padding: 8px 18px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.88rem;
      font-weight: 600;
      color: #555;
      border-left: 5px solid #ddd;
      transition: transform 0.2s;
    }

    .progress-chip:hover { transform: translateY(-1px); }

    .prog-name { font-weight: 700; color: #333; }

    .prog-count {
      font-size: 1.2rem;
      font-weight: 900;
    }

    .prog-total { color: #bbb; }

    /* â”€â”€ Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .checklist-grid {
      max-width: 700px;
      margin: 0 auto;
      background: white;
      border-radius: 22px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .grid-header,
    .grid-row {
      display: grid;
      grid-template-columns: 1fr 130px 130px;
    }

    /* â”€â”€ Header row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .grid-header {
      background: linear-gradient(135deg, #ff9a3c 0%, #ff6b35 100%);
    }

    .header-cell {
      padding: 15px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 1rem;
      color: white;
      letter-spacing: 0.3px;
    }

    .header-task {
      justify-content: flex-start;
      padding-left: 22px;
    }

    .header-p0 { background: rgba(255, 210, 100, 0.25); border-left: 2px solid rgba(255,255,255,0.25); }
    .header-p1 { background: rgba(80,  190, 255, 0.25); border-left: 2px solid rgba(255,255,255,0.25); }

    /* â”€â”€ Item rows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .grid-row {
      border-bottom: 1px solid #f3ede4;
      transition: background 0.3s;
    }

    .grid-row:last-child { border-bottom: none; }
    .grid-row:nth-child(even) { background: #fffdf8; }

    .grid-row.row-complete { background: #f2fdf4 !important; }
    .grid-row.row-complete .item-name {
      text-decoration: line-through;
      color: #aabfaa;
    }

    /* â”€â”€ Cells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cell {
      padding: 10px 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .item-cell {
      padding: 12px 16px 12px 22px;
      justify-content: flex-start;
      gap: 12px;
    }

    .item-emoji { font-size: 1.45rem; flex-shrink: 0; }

    .item-name {
      font-size: 0.95rem;
      font-weight: 600;
      color: #444;
      transition: color 0.3s;
    }

    .cell-p0 { background: rgba(255, 200, 80, 0.07); }
    .cell-p1 { background: rgba(80,  190, 255, 0.07); }

    /* â”€â”€ Custom checkbox â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .check-label {
      position: relative;
      width: 48px;
      height: 48px;
      cursor: pointer;
      display: block;
    }

    .check-label input {
      opacity: 0;
      position: absolute;
      inset: 0;
      cursor: pointer;
      z-index: 2;
      margin: 0;
    }

    .check-circle {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 2.5px solid #d8d0c8;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.35rem;
      font-weight: 900;
      transition: all 0.28s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      user-select: none;
    }

    .check-mark {
      opacity: 0;
      transform: scale(0) rotate(-20deg);
      transition: all 0.22s cubic-bezier(0.34, 1.56, 0.64, 1);
      line-height: 1;
    }

    .check-label:hover .check-circle {
      border-color: #bbb;
      background: #fafafa;
      transform: scale(1.06);
    }

    .check-label input:checked ~ .check-circle {
      background: #3cc26e;
      border-color: #3cc26e;
      transform: scale(1.12);
      box-shadow: 0 0 0 4px rgba(60, 194, 110, 0.2);
    }

    .check-label input:checked ~ .check-circle .check-mark {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }

    /* â”€â”€ Particle canvas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #particle-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
      width: 100%;
      height: 100%;
    }

    /* â”€â”€ Emoji burst â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .burst-emoji {
      position: fixed;
      pointer-events: none;
      z-index: 9998;
      font-size: 1.6rem;
      animation: emojiFly 0.85s ease-out forwards;
    }

    @keyframes emojiFly {
      0%   { transform: translate(-50%, -50%) scale(0.4); opacity: 1; }
      60%  { opacity: 1; }
      100% {
        transform: translate(calc(-50% + var(--dx, 0px)), calc(-50% + var(--dy, 0px))) scale(1.2);
        opacity: 0;
      }
    }

    /* â”€â”€ Completion banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #completion-banner {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-160px);
      background: linear-gradient(135deg, #ff6b35, #f7931e);
      color: white;
      padding: 16px 38px;
      border-radius: 50px;
      font-size: 1.25rem;
      font-weight: 800;
      box-shadow: 0 8px 32px rgba(255, 107, 53, 0.5);
      z-index: 10000;
      transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      white-space: nowrap;
    }

    #completion-banner.visible {
      transform: translateX(-50%) translateY(0);
    }

    /* â”€â”€ Reset button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #reset-btn {
      display: block;
      margin: 26px auto 0;
      padding: 12px 30px;
      background: white;
      color: #999;
      border: 2px solid #e8e0d8;
      border-radius: 30px;
      font-size: 0.88rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      letter-spacing: 0.3px;
    }

    #reset-btn:hover {
      background: #ff6b35;
      color: white;
      border-color: #ff6b35;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
    }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 500px) {
      .page-title { font-size: 1.9rem; }

      .grid-header,
      .grid-row { grid-template-columns: 1fr 78px 78px; }

      .header-cell { padding: 13px 6px; font-size: 0.85rem; }
      .item-cell   { padding: 10px 10px 10px 14px; gap: 8px; }
      .item-emoji  { font-size: 1.2rem; }
      .item-name   { font-size: 0.82rem; }
      .cell        { padding: 8px 4px; }

      .check-label,
      .check-circle { width: 40px; height: 40px; }
    }
  </style>
</head>
<body>

<canvas id="particle-canvas"></canvas>
<div id="completion-banner">ğŸŒŸ Amazing! All done! ğŸ‰</div>

<div class="page-header">
  <h1 class="page-title" id="page-title">â˜€ï¸ Morning Checklist</h1>
  <p class="page-date" id="date-display"></p>
</div>

<div class="progress-row" id="progress-row"></div>

<div class="checklist-grid" id="checklist-grid"></div>

<button id="reset-btn" onclick="resetAll()">â†º Reset Today's Progress</button>

<script>
// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  âœï¸  CONFIGURATION                                           â•‘
// â•‘  Edit this section to customise names, items, and colours.  â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const CONFIG = {

  // Page title
  title: 'â˜€ï¸ Morning Checklist',

  // The two people (columns). Change names here.
  people: ['Capybara', 'Nova'],

  // Accent colour for each person's column [person 0, person 1]
  peopleColors: ['#ff9a3c', '#45b7d1'],

  // â”€â”€ Checklist items â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Add, remove, or rename freely.
  // Each item requires a 'name' and an 'emoji'.
  items: [
    { name: 'Breakfast',          emoji: 'ğŸ³'  },
    { name: 'Put Bowl Away',      emoji: 'ğŸ¥£'  },
    { name: 'Dressed',            emoji: 'ğŸ‘•'  },
    { name: 'Brush Teeth',        emoji: 'ğŸ¦·'  },
    { name: 'Feed Piggies',       emoji: 'ğŸ¹'  },
    { name: 'Clean Piggies Cage', emoji: 'ğŸ§¹'  },
    { name: 'Drink Bottle',       emoji: 'ğŸ¥¤'  },
    { name: 'Lunch',              emoji: 'ğŸ¥ª'  },
    { name: 'Hat',                emoji: 'ğŸ§¢'  },
  ],

};

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  END OF CONFIGURATION                                        â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


// â”€â”€ Seeded RNG (Mulberry32) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// The seed is today's date, so rewards are the same all day but
// shuffle on each new day.

function makeDateSeed() {
  const d = new Date();
  return (d.getFullYear() * 10000 + (d.getMonth() + 1) * 100 + d.getDate()) | 0;
}

function mulberry32(initialSeed) {
  let s = initialSeed;
  return () => {
    s = (s + 0x6D2B79F5) | 0;
    let t = Math.imul(s ^ (s >>> 15), 1 | s);
    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}

const rng = mulberry32(makeDateSeed());


// â”€â”€ Audio context â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

let _ac = null;
function getAC() {
  if (!_ac) _ac = new (window.AudioContext || window.webkitAudioContext)();
  if (_ac.state === 'suspended') _ac.resume();
  return _ac;
}


// â”€â”€ Sound recipes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function sndChime(ac) {
  [523.25, 659.25, 783.99, 1046.5].forEach((f, i) => {
    const o = ac.createOscillator(), g = ac.createGain();
    o.connect(g); g.connect(ac.destination);
    o.type = 'sine'; o.frequency.value = f;
    const t = ac.currentTime + i * 0.13;
    g.gain.setValueAtTime(0, t);
    g.gain.linearRampToValueAtTime(0.32, t + 0.02);
    g.gain.exponentialRampToValueAtTime(0.001, t + 0.65);
    o.start(t); o.stop(t + 0.65);
  });
}

function sndFanfare(ac) {
  [[392,'square'],[523,'square'],[659,'square'],[784,'square'],[1047,'sawtooth']]
    .forEach(([f, type], i) => {
      const o = ac.createOscillator(), g = ac.createGain();
      o.connect(g); g.connect(ac.destination);
      o.type = type; o.frequency.value = f;
      const t = ac.currentTime + i * 0.09;
      g.gain.setValueAtTime(0, t);
      g.gain.linearRampToValueAtTime(0.11, t + 0.03);
      g.gain.exponentialRampToValueAtTime(0.001, t + 0.28);
      o.start(t); o.stop(t + 0.28);
    });
}

function sndPop(ac) {
  const o = ac.createOscillator(), g = ac.createGain();
  o.connect(g); g.connect(ac.destination);
  o.type = 'sine';
  o.frequency.setValueAtTime(950, ac.currentTime);
  o.frequency.exponentialRampToValueAtTime(180, ac.currentTime + 0.18);
  g.gain.setValueAtTime(0.5, ac.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001, ac.currentTime + 0.18);
  o.start(); o.stop(ac.currentTime + 0.2);
}

function sndSparkle(ac) {
  [1047, 1319, 1568, 2093, 2637].forEach((f, i) => {
    const o = ac.createOscillator(), g = ac.createGain();
    o.connect(g); g.connect(ac.destination);
    o.type = 'triangle'; o.frequency.value = f;
    const t = ac.currentTime + i * 0.065;
    g.gain.setValueAtTime(0, t);
    g.gain.linearRampToValueAtTime(0.2, t + 0.02);
    g.gain.exponentialRampToValueAtTime(0.001, t + 0.24);
    o.start(t); o.stop(t + 0.24);
  });
}

function sndWhoosh(ac) {
  const len = ac.sampleRate * 0.4;
  const buf = ac.createBuffer(1, len, ac.sampleRate);
  const d = buf.getChannelData(0);
  for (let i = 0; i < len; i++) d[i] = Math.random() * 2 - 1;
  const src = ac.createBufferSource();
  src.buffer = buf;
  const filt = ac.createBiquadFilter();
  filt.type = 'bandpass';
  filt.frequency.setValueAtTime(250, ac.currentTime);
  filt.frequency.exponentialRampToValueAtTime(2400, ac.currentTime + 0.4);
  filt.Q.value = 0.6;
  const g = ac.createGain();
  g.gain.setValueAtTime(0.3, ac.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001, ac.currentTime + 0.4);
  src.connect(filt); filt.connect(g); g.connect(ac.destination);
  src.start(); src.stop(ac.currentTime + 0.4);
}

function sndMagic(ac) {
  [528, 639, 741, 852, 963, 1074].forEach((f, i) => {
    const o = ac.createOscillator(), g = ac.createGain();
    o.connect(g); g.connect(ac.destination);
    o.type = 'triangle'; o.frequency.value = f;
    const t = ac.currentTime + i * 0.08;
    g.gain.setValueAtTime(0, t);
    g.gain.linearRampToValueAtTime(0.18, t + 0.025);
    g.gain.exponentialRampToValueAtTime(0.001, t + 0.38);
    o.start(t); o.stop(t + 0.38);
  });
}

function sndBoing(ac) {
  const o = ac.createOscillator(), g = ac.createGain();
  o.connect(g); g.connect(ac.destination);
  o.type = 'sine';
  o.frequency.setValueAtTime(200, ac.currentTime);
  o.frequency.exponentialRampToValueAtTime(800, ac.currentTime + 0.08);
  o.frequency.exponentialRampToValueAtTime(300, ac.currentTime + 0.4);
  g.gain.setValueAtTime(0.4, ac.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001, ac.currentTime + 0.45);
  o.start(); o.stop(ac.currentTime + 0.45);
}

const SOUNDS = [sndChime, sndFanfare, sndPop, sndSparkle, sndWhoosh, sndMagic, sndBoing];


// â”€â”€ Particle engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const canvas = document.getElementById('particle-canvas');
const cx     = canvas.getContext('2d');
let   parts  = [];
let   rafId  = null;

function resizeCanvas() {
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function addParts(x, y, opts) {
  const { count = 55, colors, shapes, speed = 1, gravity = 0.18, life = 72 } = opts;
  for (let i = 0; i < count; i++) {
    const a = Math.random() * Math.PI * 2;
    const s = (Math.random() * 7 + 2.5) * speed;
    parts.push({
      x, y,
      vx: Math.cos(a) * s,
      vy: Math.sin(a) * s - 3.5,
      gravity,
      color: colors[Math.floor(Math.random() * colors.length)],
      shape: shapes[Math.floor(Math.random() * shapes.length)],
      size:  Math.random() * 9 + 5,
      rot:   Math.random() * Math.PI * 2,
      rotV:  (Math.random() - 0.5) * 0.28,
      life,
      maxLife: life,
    });
  }
  if (!rafId) rafId = requestAnimationFrame(tick);
}

function tick() {
  cx.clearRect(0, 0, canvas.width, canvas.height);
  parts = parts.filter(p => p.life > 0);

  for (const p of parts) {
    p.x  += p.vx;
    p.y  += p.vy;
    p.vy += p.gravity;
    p.vx *= 0.985;
    p.rot += p.rotV;
    p.life--;

    const alpha = p.life / p.maxLife;
    cx.save();
    cx.globalAlpha = alpha;
    cx.fillStyle   = p.color;
    cx.translate(p.x, p.y);
    cx.rotate(p.rot);

    if      (p.shape === 'rect')   { cx.fillRect(-p.size / 2, -p.size * 0.3, p.size, p.size * 0.6); }
    else if (p.shape === 'circle') { cx.beginPath(); cx.arc(0, 0, p.size / 2, 0, Math.PI * 2); cx.fill(); }
    else if (p.shape === 'star')   { drawStar(cx, p.size / 2); }
    else if (p.shape === 'tri')    { cx.beginPath(); cx.moveTo(0,-p.size/2); cx.lineTo(p.size/2,p.size/2); cx.lineTo(-p.size/2,p.size/2); cx.closePath(); cx.fill(); }

    cx.restore();
  }

  if (parts.length) {
    rafId = requestAnimationFrame(tick);
  } else {
    rafId = null;
    cx.clearRect(0, 0, canvas.width, canvas.height);
  }
}

function drawStar(c, r) {
  const inner = r * 0.42, spikes = 5;
  let rot = -Math.PI / 2;
  const step = Math.PI / spikes;
  c.beginPath();
  for (let i = 0; i < spikes * 2; i++) {
    const radius = i % 2 === 0 ? r : inner;
    if (i === 0) c.moveTo(Math.cos(rot) * radius, Math.sin(rot) * radius);
    else         c.lineTo(Math.cos(rot) * radius, Math.sin(rot) * radius);
    rot += step;
  }
  c.closePath();
  c.fill();
}

function elXY(el) {
  const r = el.getBoundingClientRect();
  return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
}


// â”€â”€ Visual reward recipes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const VISUALS = {

  confetti(el) {
    const { x, y } = elXY(el);
    addParts(x, y, {
      count: 70,
      colors: ['#ff6b35','#f7931e','#ffe066','#4ecdc4','#45b7d1','#96ceb4','#ff8b94','#c77dff','#b5ead7'],
      shapes: ['rect','rect','circle','tri'],
    });
  },

  stars(el) {
    const { x, y } = elXY(el);
    addParts(x, y, {
      count: 50,
      colors: ['#ffd700','#ffed4e','#ffe970','#ff8c00','#ffa500','#fff3a3'],
      shapes: ['star','star','circle'],
      speed: 1.3,
      life: 68,
    });
  },

  fireworks(el) {
    const { x, y } = elXY(el);
    const burst = (bx, by) => addParts(bx, by, {
      count: 45,
      colors: ['#ff0000','#ff7f00','#ffff00','#00e676','#2979ff','#e040fb','#ff4081'],
      shapes: ['circle','star'],
      speed: 1.55,
    });
    burst(x, y);
    setTimeout(() => burst(x - 95, y - 65), 190);
    setTimeout(() => burst(x + 95, y - 65), 290);
  },

  rainbow(el) {
    const { x, y } = elXY(el);
    addParts(x, y, {
      count: 85,
      colors: ['#ff0000','#ff7700','#ffff00','#00cc44','#0077ff','#8800ff','#ff69b4'],
      shapes: ['circle','rect'],
      speed: 0.9,
      life: 88,
    });
  },

  emojis(el, emoji) {
    const { x, y } = elXY(el);
    for (let i = 0; i < 10; i++) {
      const angle = (i / 10) * Math.PI * 2;
      const dist  = 72 + Math.random() * 55;
      const div   = document.createElement('div');
      div.className = 'burst-emoji';
      div.textContent = emoji;
      div.style.cssText = `left:${x}px;top:${y}px;`;
      div.style.setProperty('--dx', Math.cos(angle) * dist + 'px');
      div.style.setProperty('--dy', Math.sin(angle) * dist + 'px');
      document.body.appendChild(div);
      setTimeout(() => div.remove(), 950);
    }
  },

  sparkles(el) {
    const { x, y } = elXY(el);
    addParts(x, y, {
      count: 60,
      colors: ['#ffffff','#ffe0ff','#d0e8ff','#d0ffe8','#fff0d0','#ffd0d0','#f0d0ff'],
      shapes: ['star','circle','star'],
      speed: 0.95,
      gravity: 0.12,
      life: 80,
    });
  },

  bubbles(el) {
    const { x, y } = elXY(el);
    addParts(x, y, {
      count: 55,
      colors: ['#e0f7fa','#b2ebf2','#80deea','#4dd0e1','#26c6da','#b3e5fc','#f8bbd0'],
      shapes: ['circle','circle','circle'],
      speed: 0.75,
      gravity: 0.08,
      life: 90,
    });
  },

};

const VISUAL_KEYS = Object.keys(VISUALS);


// â”€â”€ Assign rewards (seeded by today's date) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const rewardPlan = CONFIG.items.map(() => ({
  soundFn:   SOUNDS[Math.floor(rng() * SOUNDS.length)],
  visualKey: VISUAL_KEYS[Math.floor(rng() * VISUAL_KEYS.length)],
}));

function fireReward(itemIdx, circleEl) {
  const { soundFn, visualKey } = rewardPlan[itemIdx];
  try { soundFn(getAC()); } catch (e) { /* audio blocked â€“ ignore */ }
  VISUALS[visualKey](circleEl, CONFIG.items[itemIdx].emoji);
}


// â”€â”€ Build the UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function buildUI() {
  document.title = CONFIG.title;
  document.getElementById('page-title').textContent = CONFIG.title;

  // Date
  document.getElementById('date-display').textContent =
    new Date().toLocaleDateString('en-US', {
      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
    });

  // Progress chips
  const progressRow = document.getElementById('progress-row');
  CONFIG.people.forEach((name, i) => {
    const chip = document.createElement('div');
    chip.className = 'progress-chip';
    chip.id = `chip-${i}`;
    chip.style.borderLeftColor = CONFIG.peopleColors[i];
    chip.innerHTML = `
      <span class="prog-name">${name}</span>
      <span class="prog-count" id="prog-count-${i}" style="color:${CONFIG.peopleColors[i]}">0</span>
      <span class="prog-total">/ ${CONFIG.items.length}</span>
    `;
    progressRow.appendChild(chip);
  });

  // Grid
  const grid = document.getElementById('checklist-grid');

  // Header
  const hdr = document.createElement('div');
  hdr.className = 'grid-header';
  hdr.innerHTML = `
    <div class="header-cell header-task">Task</div>
    <div class="header-cell header-p0">${CONFIG.people[0]}</div>
    <div class="header-cell header-p1">${CONFIG.people[1]}</div>
  `;
  grid.appendChild(hdr);

  // Item rows
  CONFIG.items.forEach((item, iIdx) => {
    const row = document.createElement('div');
    row.className = 'grid-row';
    row.id = `row-${iIdx}`;

    let html = `
      <div class="cell item-cell">
        <span class="item-emoji">${item.emoji}</span>
        <span class="item-name">${item.name}</span>
      </div>
    `;

    for (let pIdx = 0; pIdx < CONFIG.people.length; pIdx++) {
      html += `
        <div class="cell cell-p${pIdx}">
          <label class="check-label">
            <input type="checkbox" id="cb-${iIdx}-${pIdx}"
              onchange="onCheck(this, ${iIdx}, ${pIdx})">
            <div class="check-circle">
              <span class="check-mark">âœ“</span>
            </div>
          </label>
        </div>
      `;
    }

    row.innerHTML = html;
    grid.appendChild(row);
  });
}


// â”€â”€ Event handling â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function onCheck(cb, iIdx, pIdx) {
  if (cb.checked) {
    const circle = cb.nextElementSibling;
    fireReward(iIdx, circle);
  }
  updateProgress();
  updateRow(iIdx);
  saveState();

  if (cb.checked) {
    const personDone = CONFIG.items.every((_, i) => {
      const c = document.getElementById(`cb-${i}-${pIdx}`);
      return c && c.checked;
    });
    if (personDone) setTimeout(() => celebratePerson(pIdx), 400);

    const total   = CONFIG.items.length * CONFIG.people.length;
    const checked = document.querySelectorAll('input[type=checkbox]:checked').length;
    if (checked === total) setTimeout(celebrateAll, 1800);
  }
}

function updateProgress() {
  CONFIG.people.forEach((_, pIdx) => {
    const count = CONFIG.items.filter((_, iIdx) => {
      const cb = document.getElementById(`cb-${iIdx}-${pIdx}`);
      return cb && cb.checked;
    }).length;
    const el = document.getElementById(`prog-count-${pIdx}`);
    if (el) el.textContent = count;
  });
}

function updateRow(iIdx) {
  const allDone = CONFIG.people.every((_, pIdx) => {
    const cb = document.getElementById(`cb-${iIdx}-${pIdx}`);
    return cb && cb.checked;
  });
  const row = document.getElementById(`row-${iIdx}`);
  if (row) row.classList.toggle('row-complete', allDone);
}

function celebratePerson(pIdx) {
  // Fireworks around that person's progress chip
  const chip = document.getElementById(`chip-${pIdx}`);
  if (chip) {
    VISUALS.fireworks(chip);
    setTimeout(() => VISUALS.fireworks(chip), 300);
    setTimeout(() => VISUALS.fireworks(chip), 600);
  }

  // Extra bursts scattered across the screen
  for (let i = 0; i < 6; i++) {
    setTimeout(() => {
      const bx = Math.random() * window.innerWidth;
      const by = Math.random() * window.innerHeight * 0.65;
      const fakeEl = { getBoundingClientRect: () => ({ left: bx - 1, top: by - 1, width: 2, height: 2 }) };
      VISUALS.fireworks(fakeEl);
    }, i * 260);
  }

  // Victory sound
  try {
    const ac = getAC();
    [[523,0],[659,0.11],[784,0.22],[1047,0.36],[1319,0.52]]
      .forEach(([f, dt]) => {
        const o = ac.createOscillator(), g = ac.createGain();
        o.connect(g); g.connect(ac.destination);
        o.type = 'square'; o.frequency.value = f;
        const t = ac.currentTime + dt;
        g.gain.setValueAtTime(0, t);
        g.gain.linearRampToValueAtTime(0.1, t + 0.03);
        g.gain.exponentialRampToValueAtTime(0.001, t + 0.3);
        o.start(t); o.stop(t + 0.3);
      });
  } catch(e) {}
}

function celebrateAll() {
  // Multi-burst confetti across the screen
  for (let i = 0; i < 9; i++) {
    setTimeout(() => {
      const bx = Math.random() * window.innerWidth;
      const by = Math.random() * window.innerHeight * 0.55;
      const fakeEl = { getBoundingClientRect: () => ({ left: bx - 1, top: by - 1, width: 2, height: 2 }) };
      VISUALS.confetti(fakeEl);
    }, i * 230);
  }

  // Victory fanfare
  try {
    const ac = getAC();
    [[523,0],[659,0.1],[784,0.2],[1047,0.35],[784,0.5],[1047,0.65],[1319,0.85]]
      .forEach(([f, dt]) => {
        const o = ac.createOscillator(), g = ac.createGain();
        o.connect(g); g.connect(ac.destination);
        o.type = 'square'; o.frequency.value = f;
        const t = ac.currentTime + dt;
        g.gain.setValueAtTime(0, t);
        g.gain.linearRampToValueAtTime(0.09, t + 0.03);
        g.gain.exponentialRampToValueAtTime(0.001, t + 0.3);
        o.start(t); o.stop(t + 0.3);
      });
  } catch(e) {}

  // Banner
  const banner = document.getElementById('completion-banner');
  banner.classList.add('visible');
  setTimeout(() => banner.classList.remove('visible'), 4500);
}


// â”€â”€ State persistence (localStorage) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function storeKey() {
  const d = new Date();
  return `morning-cl-${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
}

function saveState() {
  try {
    const state = {};
    CONFIG.items.forEach((_, i) =>
      CONFIG.people.forEach((__, j) => {
        const cb = document.getElementById(`cb-${i}-${j}`);
        if (cb) state[`${i}-${j}`] = cb.checked;
      })
    );
    localStorage.setItem(storeKey(), JSON.stringify(state));
  } catch(e) { /* private browsing â€“ silently skip */ }
}

function loadState() {
  try {
    const raw = localStorage.getItem(storeKey());
    if (!raw) return;
    const state = JSON.parse(raw);
    Object.entries(state).forEach(([key, val]) => {
      const cb = document.getElementById(`cb-${key}`);
      if (cb) cb.checked = val;
    });
    updateProgress();
    CONFIG.items.forEach((_, i) => updateRow(i));
  } catch(e) {}
}

function resetAll() {
  if (!confirm('Reset all checkboxes for today?')) return;
  try { localStorage.removeItem(storeKey()); } catch(e) {}
  CONFIG.items.forEach((_, i) =>
    CONFIG.people.forEach((__, j) => {
      const cb = document.getElementById(`cb-${i}-${j}`);
      if (cb) cb.checked = false;
    })
  );
  CONFIG.items.forEach((_, i) => updateRow(i));
  updateProgress();
}


// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
buildUI();
loadState();
</script>
</body>
</html>
